<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1529px" preserveAspectRatio="none" style="width:1662px;height:1529px;" version="1.1" viewBox="0 0 1662 1529" width="1662px" zoomAndPan="magnify"><defs><filter height="300%" id="fv3hdeoljqsbq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[436399654b8fe1aa6a8a376f2d9f944a]
class NodeBuilderDeserializer--><rect codeLine="2" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="106.0859" id="NodeBuilderDeserializer" style="stroke:#A80036;stroke-width:1.5;" width="466" x="1120.5" y="654.5"/><ellipse cx="1247.75" cy="673.6328" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1250.2231,679.7759 Q1249.6421,680.0747 1249.0029,680.2241 Q1248.3638,680.3735 1247.6582,680.3735 Q1245.1514,680.3735 1243.8315,678.7217 Q1242.5117,677.0698 1242.5117,673.9487 Q1242.5117,670.8193 1243.8315,669.1675 Q1245.1514,667.5156 1247.6582,667.5156 Q1248.3638,667.5156 1249.0112,667.665 Q1249.6587,667.8145 1250.2231,668.1133 L1250.2231,670.8359 Q1249.5923,670.2549 1248.9988,669.9851 Q1248.4053,669.7153 1247.7744,669.7153 Q1246.4297,669.7153 1245.7449,670.782 Q1245.0601,671.8486 1245.0601,673.9487 Q1245.0601,676.0405 1245.7449,677.1072 Q1246.4297,678.1738 1247.7744,678.1738 Q1248.4053,678.1738 1248.9988,677.9041 Q1249.5923,677.6343 1250.2231,677.0532 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="207" x="1266.25" y="671.1016">«StdDeserializer&lt;AbstractBuilder&gt;»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="1299.75" y="685.2344">NodeBuilderDeserializer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1121.5" x2="1585.5" y1="692.7656" y2="692.7656"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1128.5" y="700.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="252" x="1140.5" y="707.4004">String nodePath(Deque&lt;JsonNode&gt; ancestors)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1128.5" y="713.7207"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="1140.5" y="720.3555">AbstractBuilder handleNodeBuilder(...)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1128.5" y="726.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="1140.5" y="733.3105">AbstractBuilder buildNodeBuilder(...)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1121.5" x2="1585.5" y1="739.6309" y2="739.6309"/><ellipse cx="1131.5" cy="750.6309" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="440" x="1140.5" y="754.2656">AbstractBuilder deserialize(JsonParser jsonParser, DeserializationContext context)</text><!--MD5=[5012034014c1ff8a3f3643dc415972cf]
class AbstractBuilder--><rect codeLine="10" fill="#DDDDDD" filter="url(#fv3hdeoljqsbq)" height="48" id="AbstractBuilder" style="stroke:#A80036;stroke-width:1.5;" width="120" x="1051.5" y="1168"/><ellipse cx="1066.5" cy="1184" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1066.3633,1179.3481 L1065.2095,1184.4199 L1067.5254,1184.4199 Z M1064.8691,1177.1069 L1067.8657,1177.1069 L1071.2109,1189.5 L1068.7622,1189.5 L1067.9985,1186.437 L1064.7197,1186.437 L1063.9727,1189.5 L1061.5239,1189.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="88" x="1080.5" y="1188.5352">AbstractBuilder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1052.5" x2="1170.5" y1="1200" y2="1200"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1052.5" x2="1170.5" y1="1208" y2="1208"/><!--MD5=[618f212f2607b68075603f25ed5aaf67]
class LeafNodeBuilder--><rect codeLine="11" fill="#DDDDDD" filter="url(#fv3hdeoljqsbq)" height="86.8652" id="LeafNodeBuilder" style="stroke:#A80036;stroke-width:1.5;" width="314" x="930.5" y="1007"/><ellipse cx="1035.75" cy="1023" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1035.6133,1018.3481 L1034.4595,1023.4199 L1036.7754,1023.4199 Z M1034.1191,1016.1069 L1037.1157,1016.1069 L1040.4609,1028.5 L1038.0122,1028.5 L1037.2485,1025.437 L1033.9697,1025.437 L1033.2227,1028.5 L1030.7739,1028.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="1056.25" y="1027.5352">LeafNodeBuilder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="931.5" x2="1243.5" y1="1039" y2="1039"/><line style="stroke:#A80036;stroke-width:1.5;" x1="931.5" x2="1243.5" y1="1047" y2="1047"/><ellipse cx="941.5" cy="1058" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="950.5" y="1061.6348">&lt;R extends Base&gt; R build()</text><polygon fill="#FFFF44" points="941.5,1065.9551,945.5,1069.9551,941.5,1073.9551,937.5,1069.9551" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="288" x="950.5" y="1074.5898">&lt;R extends Base&gt; R build(BuildContext buildContext)</text><ellipse cx="941.5" cy="1083.9102" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="950.5" y="1087.5449">String serialize()</text><!--MD5=[230d81c22fbd2672b4d91e3b2e23bda2]
class SpecificationBuilder--><rect codeLine="16" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="180.5957" id="SpecificationBuilder" style="stroke:#A80036;stroke-width:1.5;" width="473" x="612" y="617"/><ellipse cx="627" cy="633" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M629.4731,639.1431 Q628.8921,639.4419 628.2529,639.5913 Q627.6138,639.7407 626.9082,639.7407 Q624.4014,639.7407 623.0815,638.0889 Q621.7617,636.437 621.7617,633.3159 Q621.7617,630.1865 623.0815,628.5347 Q624.4014,626.8828 626.9082,626.8828 Q627.6138,626.8828 628.2612,627.0322 Q628.9087,627.1816 629.4731,627.4805 L629.4731,630.2031 Q628.8423,629.6221 628.2488,629.3523 Q627.6553,629.0825 627.0244,629.0825 Q625.6797,629.0825 624.9949,630.1492 Q624.3101,631.2158 624.3101,633.3159 Q624.3101,635.4077 624.9949,636.4744 Q625.6797,637.541 627.0244,637.541 Q627.6553,637.541 628.2488,637.2712 Q628.8423,637.0015 629.4731,636.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="641" y="637.5352">SpecificationBuilder</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="328" x="760" y="614"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="326" x="761" y="626.6016">@JsonDeserialize(using = NodeBuilderDeserializer.class)</text><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="1084" y1="649" y2="649"/><ellipse cx="623" cy="660" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="632" y="663.6348">String specificationId</text><ellipse cx="623" cy="672.9551" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="64" x="632" y="676.5898">String name</text><ellipse cx="623" cy="685.9102" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="632" y="689.5449">String startFunctionId</text><line style="stroke:#A80036;stroke-width:1.0;" x1="613" x2="1084" y1="695.8652" y2="695.8652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="321" x="618" y="710.5">SpecificationBuilder configure(ConfigurationBuilder builder)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="300" x="618" y="723.4551">SpecificationBuilder function(NodeWithIdBuilder builder)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="618" y="736.4102">Specification end()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="613" x2="1084" y1="742.7305" y2="742.7305"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="618" y="757.3652">NodeBuilder get(String nodeId)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="613" x2="1084" y1="763.6855" y2="763.6855"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="618" y="778.3203">String serialize()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="618" y="791.2754">String serializeAsYaml()</text><!--MD5=[7fbd42d46e095486bc68b6e91ff47c83]
class ConfigurationBuilder--><rect codeLine="31" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="48" id="ConfigurationBuilder" style="stroke:#A80036;stroke-width:1.5;" width="148" x="801.5" y="878.5"/><ellipse cx="816.5" cy="894.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M818.9731,900.6431 Q818.3921,900.9419 817.7529,901.0913 Q817.1138,901.2407 816.4082,901.2407 Q813.9014,901.2407 812.5815,899.5889 Q811.2617,897.937 811.2617,894.8159 Q811.2617,891.6865 812.5815,890.0347 Q813.9014,888.3828 816.4082,888.3828 Q817.1138,888.3828 817.7612,888.5322 Q818.4087,888.6816 818.9731,888.9805 L818.9731,891.7031 Q818.3423,891.1221 817.7488,890.8523 Q817.1553,890.5825 816.5244,890.5825 Q815.1797,890.5825 814.4949,891.6492 Q813.8101,892.7158 813.8101,894.8159 Q813.8101,896.9077 814.4949,897.9744 Q815.1797,899.041 816.5244,899.041 Q817.1553,899.041 817.7488,898.7712 Q818.3423,898.5015 818.9731,897.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="116" x="830.5" y="899.0352">ConfigurationBuilder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="802.5" x2="948.5" y1="910.5" y2="910.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="802.5" x2="948.5" y1="918.5" y2="918.5"/><!--MD5=[3eaef8b2fe82ae9c5f04c1223c0791ac]
class SecurityBuilder--><rect codeLine="33" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="48" id="SecurityBuilder" style="stroke:#A80036;stroke-width:1.5;" width="446" x="570.5" y="1168"/><ellipse cx="585.5" cy="1184" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M587.9731,1190.1431 Q587.3921,1190.4419 586.7529,1190.5913 Q586.1138,1190.7407 585.4082,1190.7407 Q582.9014,1190.7407 581.5815,1189.0889 Q580.2617,1187.437 580.2617,1184.3159 Q580.2617,1181.1865 581.5815,1179.5347 Q582.9014,1177.8828 585.4082,1177.8828 Q586.1138,1177.8828 586.7612,1178.0322 Q587.4087,1178.1816 587.9731,1178.4805 L587.9731,1181.2031 Q587.3423,1180.6221 586.7488,1180.3523 Q586.1553,1180.0825 585.5244,1180.0825 Q584.1797,1180.0825 583.4949,1181.1492 Q582.8101,1182.2158 582.8101,1184.3159 Q582.8101,1186.4077 583.4949,1187.4744 Q584.1797,1188.541 585.5244,1188.541 Q586.1553,1188.541 586.7488,1188.2712 Q587.3423,1188.0015 587.9731,1187.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="599.5" y="1188.5352">SecurityBuilder</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="328" x="691.5" y="1165"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="326" x="692.5" y="1177.6016">@JsonDeserialize(using = NodeBuilderDeserializer.class)</text><line style="stroke:#A80036;stroke-width:1.5;" x1="571.5" x2="1015.5" y1="1200" y2="1200"/><line style="stroke:#A80036;stroke-width:1.5;" x1="571.5" x2="1015.5" y1="1208" y2="1208"/><!--MD5=[58d8d4dcf084cc8ac2faced7bd162a6b]
class SpecificationContextBuilder--><rect codeLine="35" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="48" id="SpecificationContextBuilder" style="stroke:#A80036;stroke-width:1.5;" width="187" x="295" y="878.5"/><ellipse cx="310" cy="894.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M312.4731,900.6431 Q311.8921,900.9419 311.2529,901.0913 Q310.6138,901.2407 309.9082,901.2407 Q307.4014,901.2407 306.0815,899.5889 Q304.7617,897.937 304.7617,894.8159 Q304.7617,891.6865 306.0815,890.0347 Q307.4014,888.3828 309.9082,888.3828 Q310.6138,888.3828 311.2612,888.5322 Q311.9087,888.6816 312.4731,888.9805 L312.4731,891.7031 Q311.8423,891.1221 311.2488,890.8523 Q310.6553,890.5825 310.0244,890.5825 Q308.6797,890.5825 307.9949,891.6492 Q307.3101,892.7158 307.3101,894.8159 Q307.3101,896.9077 307.9949,897.9744 Q308.6797,899.041 310.0244,899.041 Q310.6553,899.041 311.2488,898.7712 Q311.8423,898.5015 312.4731,897.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="324" y="899.0352">SpecificationContextBuilder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="296" x2="481" y1="910.5" y2="910.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="296" x2="481" y1="918.5" y2="918.5"/><polygon fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" points="1633.5,695.5,1645.5,707.5,1633.5,719.5,1621.5,707.5,1633.5,695.5" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[bf355ee04fde5e9ef93f670a76a73a8a]
class Specification--><rect codeLine="73" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="232.416" id="Specification" style="stroke:#A80036;stroke-width:1.5;" width="781" x="710" y="308"/><ellipse cx="1060.75" cy="324" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1063.2231,330.1431 Q1062.6421,330.4419 1062.0029,330.5913 Q1061.3638,330.7407 1060.6582,330.7407 Q1058.1514,330.7407 1056.8315,329.0889 Q1055.5117,327.437 1055.5117,324.3159 Q1055.5117,321.1865 1056.8315,319.5347 Q1058.1514,317.8828 1060.6582,317.8828 Q1061.3638,317.8828 1062.0112,318.0322 Q1062.6587,318.1816 1063.2231,318.4805 L1063.2231,321.2031 Q1062.5923,320.6221 1061.9988,320.3523 Q1061.4053,320.0825 1060.7744,320.0825 Q1059.4297,320.0825 1058.7449,321.1492 Q1058.0601,322.2158 1058.0601,324.3159 Q1058.0601,326.4077 1058.7449,327.4744 Q1059.4297,328.541 1060.7744,328.541 Q1061.4053,328.541 1061.9988,328.2712 Q1062.5923,328.0015 1063.2231,327.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="1081.25" y="328.5352">Specification</text><line style="stroke:#A80036;stroke-width:1.5;" x1="711" x2="1490" y1="340" y2="340"/><ellipse cx="721" cy="351" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="730" y="354.6348">String specificationId</text><ellipse cx="721" cy="363.9551" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="64" x="730" y="367.5898">String name</text><ellipse cx="721" cy="376.9102" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="730" y="380.5449">Configurations configurations</text><ellipse cx="721" cy="389.8652" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="730" y="393.5">Node startFunction</text><ellipse cx="721" cy="402.8203" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="730" y="406.4551">Map&lt;String, Node&gt; nodeById</text><line style="stroke:#A80036;stroke-width:1.0;" x1="711" x2="1490" y1="412.7754" y2="412.7754"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="716" y="427.4102">id()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="716" y="440.3652">name()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="716" y="453.3203">startFunction()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="711" x2="1490" y1="459.6406" y2="459.6406"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="600" x="716" y="474.2754">static Specification create(String specificationId, String name, Node startFunction, Map&lt;String, Node&gt; nodeById)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="769" x="716" y="487.2305">static Specification create(String specificationId, String name, Configurations configurations, Node startFunction, Map&lt;String, Node&gt; nodeById)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="711" x2="1490" y1="493.5508" y2="493.5508"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="469" x="716" y="508.1855">static SpecificationBuilder start(String specificationId, String name, String startFunction)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="277" x="716" y="521.1406">static SpecificationBuilder deserialize(String source)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="469" x="716" y="534.0957">static &lt;R extends AbstractBuilder&gt; R deserialize(String source, Class&lt;R&gt; builderClass)</text><!--MD5=[d5d786dfd20ceba79d9b37104dd75e1c]
class BuildContext--><rect codeLine="53" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="224.416" id="BuildContext" style="stroke:#A80036;stroke-width:1.5;" width="583" x="809" y="7"/><ellipse cx="1060.25" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1062.7231,29.1431 Q1062.1421,29.4419 1061.5029,29.5913 Q1060.8638,29.7407 1060.1582,29.7407 Q1057.6514,29.7407 1056.3315,28.0889 Q1055.0117,26.437 1055.0117,23.3159 Q1055.0117,20.1865 1056.3315,18.5347 Q1057.6514,16.8828 1060.1582,16.8828 Q1060.8638,16.8828 1061.5112,17.0322 Q1062.1587,17.1816 1062.7231,17.4805 L1062.7231,20.2031 Q1062.0923,19.6221 1061.4988,19.3523 Q1060.9053,19.0825 1060.2744,19.0825 Q1058.9297,19.0825 1058.2449,20.1492 Q1057.5601,21.2158 1057.5601,23.3159 Q1057.5601,25.4077 1058.2449,26.4744 Q1058.9297,27.541 1060.2744,27.541 Q1060.9053,27.541 1061.4988,27.2712 Q1062.0923,27.0015 1062.7231,26.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="1080.75" y="27.5352">BuildContext</text><line style="stroke:#A80036;stroke-width:1.5;" x1="810" x2="1391" y1="39" y2="39"/><ellipse cx="820" cy="50" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="829" y="53.6348">Map&lt;String, NodeBuilder&gt; nodeBuilderById</text><ellipse cx="820" cy="62.9551" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="829" y="66.5898">Map&lt;String, Object&gt; nodeInstanceById</text><line style="stroke:#A80036;stroke-width:1.0;" x1="810" x2="1391" y1="72.9102" y2="72.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="240" x="815" y="87.5449">Map&lt;String, NodeBuilder&gt; nodeBuilderById()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="175" x="815" y="100.5">NodeBuilder getBuilder(String id)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="815" y="113.4551">boolean containsBuilder(String id)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="815" y="126.4102">&lt;R&gt; Map&lt;String, R&gt; nodeInstanceById()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="815" y="139.3652">&lt;R&gt; R getInstance(String id)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="815" y="152.3203">boolean containsInstance(String id)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="815" y="165.2754">void cacheInstance(String id, Object instance)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="548" x="815" y="178.2305">&lt;V extends Base&gt; V cacheInstanceIfAbsent(String key, Function&lt;? super String, V&gt; mappingFunction)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="810" x2="1391" y1="184.5508" y2="184.5508"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="425" x="815" y="199.1855">BuildContext fromNodeBuilderById(Map&lt;String, NodeBuilder&gt; nodeBuilderById)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="815" y="212.1406">static BuildContext empty()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="571" x="815" y="225.0957">static BuildContext of(Map&lt;String, NodeBuilder&gt; nodeBuilderById, Map&lt;String, Object&gt; nodeInstanceById)</text><!--MD5=[a8317e7155956f8f5583776129103227]
class FlowContextNode--><rect codeLine="93" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="67.2207" id="FlowContextNode" style="stroke:#A80036;stroke-width:1.5;" width="273" x="245" y="1017"/><ellipse cx="327.25" cy="1036.1328" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M329.7231,1042.2759 Q329.1421,1042.5747 328.5029,1042.7241 Q327.8638,1042.8735 327.1582,1042.8735 Q324.6514,1042.8735 323.3315,1041.2217 Q322.0117,1039.5698 322.0117,1036.4487 Q322.0117,1033.3193 323.3315,1031.6675 Q324.6514,1030.0156 327.1582,1030.0156 Q327.8638,1030.0156 328.5112,1030.165 Q329.1587,1030.3145 329.7231,1030.6133 L329.7231,1033.3359 Q329.0923,1032.7549 328.4988,1032.4851 Q327.9053,1032.2153 327.2744,1032.2153 Q325.9297,1032.2153 325.2449,1033.282 Q324.5601,1034.3486 324.5601,1036.4487 Q324.5601,1038.5405 325.2449,1039.6072 Q325.9297,1040.6738 327.2744,1040.6738 Q327.9053,1040.6738 328.4988,1040.4041 Q329.0923,1040.1343 329.7231,1039.5532 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="357.25" y="1033.6016">«FlowContext»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="347.75" y="1047.7344">FlowContextNode</text><line style="stroke:#A80036;stroke-width:1.5;" x1="246" x2="517" y1="1055.2656" y2="1055.2656"/><line style="stroke:#A80036;stroke-width:1.5;" x1="246" x2="517" y1="1063.2656" y2="1063.2656"/><ellipse cx="256" cy="1074.2656" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="265" y="1077.9004">FlowContext build(BuildContext buildContext)</text><!--MD5=[c6b12c4c154dcd5ab21ea8aa8230a81e]
class SecurityNode--><rect codeLine="97" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="67.2207" id="SecurityNode" style="stroke:#A80036;stroke-width:1.5;" width="249" x="517" y="869"/><ellipse cx="599.75" cy="888.1328" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M602.2231,894.2759 Q601.6421,894.5747 601.0029,894.7241 Q600.3638,894.8735 599.6582,894.8735 Q597.1514,894.8735 595.8315,893.2217 Q594.5117,891.5698 594.5117,888.4487 Q594.5117,885.3193 595.8315,883.6675 Q597.1514,882.0156 599.6582,882.0156 Q600.3638,882.0156 601.0112,882.165 Q601.6587,882.3145 602.2231,882.6133 L602.2231,885.3359 Q601.5923,884.7549 600.9988,884.4851 Q600.4053,884.2153 599.7744,884.2153 Q598.4297,884.2153 597.7449,885.282 Q597.0601,886.3486 597.0601,888.4487 Q597.0601,890.5405 597.7449,891.6072 Q598.4297,892.6738 599.7744,892.6738 Q600.4053,892.6738 600.9988,892.4041 Q601.5923,892.1343 602.2231,891.5532 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="629.75" y="885.6016">«Security»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="620.25" y="899.7344">SecurityNode</text><line style="stroke:#A80036;stroke-width:1.5;" x1="518" x2="765" y1="907.2656" y2="907.2656"/><line style="stroke:#A80036;stroke-width:1.5;" x1="518" x2="765" y1="915.2656" y2="915.2656"/><ellipse cx="528" cy="926.2656" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="537" y="929.9004">Security build(BuildContext buildContext)</text><!--MD5=[9b7eb76f801c309757ef5968cb2349d9]
class Configuration--><rect codeLine="102" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="48" id="Configuration" style="stroke:#A80036;stroke-width:1.5;" width="108" x="101.5" y="1026.5"/><ellipse cx="116.5" cy="1042.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M112.9277,1038.7651 L112.9277,1036.6069 L120.3071,1036.6069 L120.3071,1038.7651 L117.8418,1038.7651 L117.8418,1046.8418 L120.3071,1046.8418 L120.3071,1049 L112.9277,1049 L112.9277,1046.8418 L115.3931,1046.8418 L115.3931,1038.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="76" x="130.5" y="1047.0352">Configuration</text><line style="stroke:#A80036;stroke-width:1.5;" x1="102.5" x2="208.5" y1="1058.5" y2="1058.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="102.5" x2="208.5" y1="1066.5" y2="1066.5"/><!--MD5=[4f8b811aec3a3df72e244625067b7f7b]
class Configurations--><rect codeLine="103" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="94.8652" id="Configurations" style="stroke:#A80036;stroke-width:1.5;" width="421" x="82" y="660"/><ellipse cx="247.25" cy="676" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M243.6777,672.2651 L243.6777,670.1069 L251.0571,670.1069 L251.0571,672.2651 L248.5918,672.2651 L248.5918,680.3418 L251.0571,680.3418 L251.0571,682.5 L243.6777,682.5 L243.6777,680.3418 L246.1431,680.3418 L246.1431,672.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="82" x="267.75" y="680.5352">Configurations</text><line style="stroke:#A80036;stroke-width:1.5;" x1="83" x2="502" y1="692" y2="692"/><ellipse cx="93" cy="703" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="395" x="102" y="706.6348">Map&lt;Class&lt;? extends Configuration&gt;, Configuration&gt; configurationMap</text><line style="stroke:#A80036;stroke-width:1.0;" x1="83" x2="502" y1="712.9551" y2="712.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="88" y="727.5898">FlowContext flowContext()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="88" y="740.5449">Security security()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="83" x2="502" y1="746.8652" y2="746.8652"/><!--MD5=[e4403e38d5c853ab535e21a3af2409fb]
class Configurations.Builder--><rect codeLine="110" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="86.8652" id="Configurations.Builder" style="stroke:#A80036;stroke-width:1.5;" width="251" x="9" y="859"/><ellipse cx="67.25" cy="875" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M63.6777,871.2651 L63.6777,869.1069 L71.0571,869.1069 L71.0571,871.2651 L68.5918,871.2651 L68.5918,879.3418 L71.0571,879.3418 L71.0571,881.5 L63.6777,881.5 L63.6777,879.3418 L66.1431,879.3418 L66.1431,871.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="126" x="87.75" y="879.5352">Configurations.Builder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="259" y1="891" y2="891"/><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="259" y1="899" y2="899"/><ellipse cx="20" cy="910" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="219" x="29" y="913.6348">Builder add(Configuration configuration)</text><polygon fill="#4177AF" points="20,918.9551,16,924.9551,24,924.9551" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="29" y="926.5898">void createDefaultConfigurationIfAbsent()</text><ellipse cx="20" cy="935.9102" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="29" y="939.5449">Configurations build()</text><!--MD5=[1f7a17f800e3cb6ba206ebcb7ff38dbc]
class FlowContext--><rect codeLine="115" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="73.9102" id="FlowContext" style="stroke:#A80036;stroke-width:1.5;" width="195" x="139" y="1155"/><ellipse cx="197.75" cy="1171" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M194.1777,1167.2651 L194.1777,1165.1069 L201.5571,1165.1069 L201.5571,1167.2651 L199.0918,1167.2651 L199.0918,1175.3418 L201.5571,1175.3418 L201.5571,1177.5 L194.1777,1177.5 L194.1777,1175.3418 L196.6431,1175.3418 L196.6431,1167.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="218.25" y="1175.5352">FlowContext</text><line style="stroke:#A80036;stroke-width:1.5;" x1="140" x2="333" y1="1187" y2="1187"/><line style="stroke:#A80036;stroke-width:1.5;" x1="140" x2="333" y1="1195" y2="1195"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="145" y="1209.6348">String topic()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="145" y="1222.5898">ExecutionContext globalContext()</text><!--MD5=[c40368751ea5476301fbcdc8cb25eba8]
class Security--><rect codeLine="119" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="73.9102" id="Security" style="stroke:#A80036;stroke-width:1.5;" width="149" x="553" y="1013.5"/><ellipse cx="601.25" cy="1029.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M597.6777,1025.7651 L597.6777,1023.6069 L605.0571,1023.6069 L605.0571,1025.7651 L602.5918,1025.7651 L602.5918,1033.8418 L605.0571,1033.8418 L605.0571,1036 L597.6777,1036 L597.6777,1033.8418 L600.1431,1033.8418 L600.1431,1025.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="621.75" y="1034.0352">Security</text><line style="stroke:#A80036;stroke-width:1.5;" x1="554" x2="701" y1="1045.5" y2="1045.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="554" x2="701" y1="1053.5" y2="1053.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="559" y="1068.1348">String sslBundleName()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="559" y="1081.0898">List&lt;Identity&gt; identities()</text><!--MD5=[ae336da5efe52b168083e063e86251c2]
class Base--><rect codeLine="123" fill="#DDDDDD" filter="url(#fv3hdeoljqsbq)" height="48" id="Base" style="stroke:#A80036;stroke-width:1.5;" width="59" x="602" y="1467"/><ellipse cx="617" cy="1483" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M613.4277,1479.2651 L613.4277,1477.1069 L620.8071,1477.1069 L620.8071,1479.2651 L618.3418,1479.2651 L618.3418,1487.3418 L620.8071,1487.3418 L620.8071,1489.5 L613.4277,1489.5 L613.4277,1487.3418 L615.8931,1487.3418 L615.8931,1479.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="27" x="631" y="1487.5352">Base</text><line style="stroke:#A80036;stroke-width:1.5;" x1="603" x2="660" y1="1499" y2="1499"/><line style="stroke:#A80036;stroke-width:1.5;" x1="603" x2="660" y1="1507" y2="1507"/><!--MD5=[3670a9b67b8a752f6e42da25dea7e2da]
class Leaf--><rect codeLine="124" fill="#DDDDDD" filter="url(#fv3hdeoljqsbq)" height="48" id="Leaf" style="stroke:#A80036;stroke-width:1.5;" width="56" x="603.5" y="1332"/><ellipse cx="618.5" cy="1348" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M614.9277,1344.2651 L614.9277,1342.1069 L622.3071,1342.1069 L622.3071,1344.2651 L619.8418,1344.2651 L619.8418,1352.3418 L622.3071,1352.3418 L622.3071,1354.5 L614.9277,1354.5 L614.9277,1352.3418 L617.3931,1352.3418 L617.3931,1344.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="24" x="632.5" y="1352.5352">Leaf</text><line style="stroke:#A80036;stroke-width:1.5;" x1="604.5" x2="658.5" y1="1364" y2="1364"/><line style="stroke:#A80036;stroke-width:1.5;" x1="604.5" x2="658.5" y1="1372" y2="1372"/><!--MD5=[d89522dc17e4c35c83a603e675ef016b]
class Identity--><rect codeLine="125" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="60.9551" id="Identity" style="stroke:#A80036;stroke-width:1.5;" width="74" x="461.5" y="1161.5"/><ellipse cx="476.5" cy="1177.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M472.9277,1173.7651 L472.9277,1171.6069 L480.3071,1171.6069 L480.3071,1173.7651 L477.8418,1173.7651 L477.8418,1181.8418 L480.3071,1181.8418 L480.3071,1184 L472.9277,1184 L472.9277,1181.8418 L475.3931,1181.8418 L475.3931,1173.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="42" x="490.5" y="1182.0352">Identity</text><line style="stroke:#A80036;stroke-width:1.5;" x1="462.5" x2="534.5" y1="1193.5" y2="1193.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="462.5" x2="534.5" y1="1201.5" y2="1201.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="467.5" y="1216.1348">String id()</text><!--MD5=[6dc66004c4a681afacbf32bf46a47880]
class JwtIdentity--><rect codeLine="128" fill="#FEFECE" filter="url(#fv3hdeoljqsbq)" height="73.9102" id="JwtIdentity" style="stroke:#A80036;stroke-width:1.5;" width="185" x="383" y="1319"/><ellipse cx="441.75" cy="1335" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M438.1777,1331.2651 L438.1777,1329.1069 L445.5571,1329.1069 L445.5571,1331.2651 L443.0918,1331.2651 L443.0918,1339.3418 L445.5571,1339.3418 L445.5571,1341.5 L438.1777,1341.5 L438.1777,1339.3418 L440.6431,1339.3418 L440.6431,1331.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="462.25" y="1339.5352">JwtIdentity</text><line style="stroke:#A80036;stroke-width:1.5;" x1="384" x2="567" y1="1351" y2="1351"/><line style="stroke:#A80036;stroke-width:1.5;" x1="384" x2="567" y1="1359" y2="1359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="389" y="1373.6348">JwtHeaderClaims headerClaims()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="389" y="1386.5898">JwtClaims claims()</text><!--MD5=[b8f9c9f402fdb0639661b25476f0741f]
class ExecutionContext--><rect codeLine="132" fill="#DDDDDD" filter="url(#fv3hdeoljqsbq)" height="99.8203" id="ExecutionContext" style="stroke:#A80036;stroke-width:1.5;" width="204" x="134.5" y="1306"/><ellipse cx="182.75" cy="1322" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M185.2231,1328.1431 Q184.6421,1328.4419 184.0029,1328.5913 Q183.3638,1328.7407 182.6582,1328.7407 Q180.1514,1328.7407 178.8315,1327.0889 Q177.5117,1325.437 177.5117,1322.3159 Q177.5117,1319.1865 178.8315,1317.5347 Q180.1514,1315.8828 182.6582,1315.8828 Q183.3638,1315.8828 184.0112,1316.0322 Q184.6587,1316.1816 185.2231,1316.4805 L185.2231,1319.2031 Q184.5923,1318.6221 183.9988,1318.3523 Q183.4053,1318.0825 182.7744,1318.0825 Q181.4297,1318.0825 180.7449,1319.1492 Q180.0601,1320.2158 180.0601,1322.3159 Q180.0601,1324.4077 180.7449,1325.4744 Q181.4297,1326.541 182.7744,1326.541 Q183.4053,1326.541 183.9988,1326.2712 Q184.5923,1326.0015 185.2231,1325.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="203.25" y="1326.5352">ExecutionContext</text><line style="stroke:#A80036;stroke-width:1.5;" x1="135.5" x2="337.5" y1="1338" y2="1338"/><polygon fill="none" points="145.5,1345,141.5,1351,149.5,1351" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="154.5" y="1352.6348">Services services</text><polygon fill="none" points="145.5,1357.9551,141.5,1363.9551,149.5,1363.9551" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="154.5" y="1365.5898">Map&lt;Object, Object&gt; globalState</text><polygon fill="none" points="145.5,1370.9102,141.5,1376.9102,149.5,1376.9102" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="154.5" y="1378.5449">Map&lt;String, Object&gt; variables</text><polygon fill="none" points="145.5,1383.8652,141.5,1389.8652,149.5,1389.8652" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="154.5" y="1391.5">Map&lt;Object, Object&gt; state</text><line style="stroke:#A80036;stroke-width:1.5;" x1="135.5" x2="337.5" y1="1397.8203" y2="1397.8203"/><!--MD5=[67221c9c9747404b57ea903f540c2a26]
reverse link SpecificationBuilder to NodeBuilderDeserializer--><path codeLine="38" d="M1090.43,707.5 C1100.4,707.5 1110.36,707.5 1120.33,707.5 " fill="none" id="SpecificationBuilder-backto-NodeBuilderDeserializer" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1085.22,707.5,1094.22,711.5,1090.22,707.5,1094.22,703.5,1085.22,707.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1c1a187e654e1955f2b39436195bef8e]
link NodeBuilderDeserializer to diamond--><path codeLine="40" d="M1586.74,729.62 C1599.65,724.74 1612.56,718.84 1625.46,711.93 " fill="none" id="NodeBuilderDeserializer-diamond" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1594.4956" y="743.071">from 0..*</text><!--MD5=[1c1a187e654e1955f2b39436195bef8e]
link NodeBuilderDeserializer to diamond--><path codeLine="41" d="M1586.74,685.38 C1599.65,690.26 1612.56,696.16 1625.46,703.07 " fill="none" id="NodeBuilderDeserializer-diamond-1" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1594.3026" y="682.0723">to 0..*</text><!--MD5=[c9c98bf5b696dfad8f83983bc2c661ec]
reverse link Specification to NodeBuilderDeserializer--><path codeLine="43" d="M1212.94,550.11 C1245.94,586.83 1280.23,624.98 1306.68,654.41 " fill="none" id="Specification-backto-NodeBuilderDeserializer" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1204.13,540.31,1205.163,547.4467,1212.1481,549.238,1211.1151,542.1013,1204.13,540.31" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1242.5" y="583.5684">deserialize()</text><!--MD5=[635e526ab6e6500b0207fcebb1bd9def]
reverse link LeafNodeBuilder to AbstractBuilder--><path codeLine="44" d="M1098.24,1113.91 C1101.53,1133.04 1104.95,1152.91 1107.49,1167.69 " fill="none" id="LeafNodeBuilder-backto-AbstractBuilder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="1091.32,1115.01,1094.83,1094.11,1105.12,1112.64,1091.32,1115.01" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[cf3570725fc937bde0c41f84f8c898da]
reverse link ConfigurationBuilder to LeafNodeBuilder--><path codeLine="45" d="M925.62,938.01 C955.5,958.59 993.68,984.89 1025.46,1006.77 " fill="none" id="ConfigurationBuilder-backto-LeafNodeBuilder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="921.59,943.74,909.09,926.63,929.53,932.21,921.59,943.74" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[464190ca0097b13dd4148f3684be32fe]
link ConfigurationBuilder to SecurityBuilder--><path codeLine="46" d="M868.93,926.54 C855.19,974.7 823.27,1086.63 805.68,1148.31 " fill="none" id="ConfigurationBuilder-to-SecurityBuilder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="812.32,1150.54,800.1,1167.85,798.86,1146.7,812.32,1150.54" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8e5df6148d0d815a368df41ed0f13afa]
reverse link SpecificationContextBuilder to ConfigurationBuilder--><path codeLine="47" d="M436.25,866.99 C459.37,851.96 488.31,836.17 517,828.5 C623.91,799.92 660.18,796.1 766,828.5 C797.81,838.24 828.72,860.69 849.54,878.32 " fill="none" id="SpecificationContextBuilder-backto-ConfigurationBuilder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="439.9,872.97,419.43,878.45,432.02,861.4,439.9,872.97" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0c02f40eb5849aaa5b8e01ec93ee9bfb]
reverse link SpecificationBuilder to ConfigurationBuilder--><path codeLine="49" d="M863.86,818.29 C867.03,840.99 870.07,862.69 872.24,878.23 " fill="none" id="SpecificationBuilder-backto-ConfigurationBuilder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="856.89,819,861.05,798.22,870.75,817.06,856.89,819" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6e74d913ae267c88137ea9e15e99925b]
reverse link Specification to SpecificationBuilder--><path codeLine="50" d="M993.79,544.2 C972.02,568.52 949.47,593.71 928.81,616.79 " fill="none" id="Specification-backto-SpecificationBuilder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="997.27,540.31,988.2847,544.3429,993.9331,544.0336,994.2424,549.682,997.27,540.31" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="967.5" y="583.5684">end()</text><!--MD5=[166b69277424eaee371eb40d841a4788]
reverse link BuildContext to BuildContext--><path codeLine="71" d="M1396.98,99.21 C1415.71,103.86 1427,110.46 1427,119 C1427,128.27 1413.71,135.24 1392.06,139.93 " fill="none" id="BuildContext-backto-BuildContext" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="1392.06,98.07,1399.925,103.998,1396.931,99.1985,1401.7306,96.2045,1392.06,98.07" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="6" x="1399.8842" y="94.8818">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1399.9108" y="137.8537">1</text><!--MD5=[d45f5e3af446629d90ddac123fa8781b]
reverse link Configuration to FlowContext--><path d="M179.08,1092.11 C190.6,1111.94 204.34,1135.61 215.49,1154.82 " fill="none" id="Configuration-backto-FlowContext" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="172.86,1095.35,168.88,1074.54,184.97,1088.32,172.86,1095.35" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0f040cf0169c6bee4dae7485ed3f9a9b]
link BuildContext to Specification--><path codeLine="139" d="M1100.5,244.12 C1100.5,260.75 1100.5,295.84 1100.5,295.84 " fill="none" id="BuildContext-Specification" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="1100.5,307.84,1104.5,301.84,1100.5,295.84,1096.5,301.84,1100.5,307.84" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1100.5,231.11,1096.5,240.11,1100.5,236.11,1104.5,240.11,1100.5,231.11" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1100.5" x2="1100.5" y1="236.11" y2="244.11"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="1101.5" y="274.5684">create()</text><!--MD5=[4ce99cb48665362c9842b01b3dfa9e81]
link Configurations to SpecificationBuilder--><path codeLine="141" d="M516.48,707.5 C543.44,707.5 599.77,707.5 599.77,707.5 " fill="none" id="Configurations-SpecificationBuilder" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="611.77,707.5,605.77,703.5,599.77,707.5,605.77,711.5,611.77,707.5" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="503.1,707.5,512.1,711.5,508.1,707.5,512.1,703.5,503.1,707.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="508.1" x2="516.1" y1="707.5" y2="707.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="534.5" y="701.0684">create()</text><!--MD5=[1a3a6a1fa3c1afc1e919269115022048]
link Configurations to Configurations.Builder--><path codeLine="142" d="M254.25,755.22 C231.23,783.34 201.86,819.22 177.96,848.41 " fill="none" id="Configurations-to-Configurations.Builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="169.43,858.84,176.327,856.7351,177.0367,849.559,170.1397,851.6639,169.43,858.84" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[66e7b43c4500ed373529fbb2722ef2c2]
reverse link Configurations.Builder to Configuration--><path codeLine="143" d="M142.49,959.07 C145.84,982.31 149.54,1008.05 152.14,1026.11 " fill="none" id="Configurations.Builder-backto-Configuration" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="140.63,946.12,137.5278,952.6297,142.3437,957.997,145.4458,951.4873,140.63,946.12" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f3bc1837f4f8a441ea10fe85170c9f84]
reverse link FlowContextNode to FlowContext--><path codeLine="145" d="M333.09,1098.08 C313.87,1116.57 292.1,1137.51 274.11,1154.82 " fill="none" id="FlowContextNode-backto-FlowContext" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="328.24,1093.03,347.5,1084.21,337.94,1103.12,328.24,1093.03" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2a1b184c418660a9f8f88dc20e240287]
reverse link SpecificationContextBuilder to FlowContextNode--><path codeLine="146" d="M386.77,939.66 C385.63,963.35 384.16,994.05 383.06,1016.97 " fill="none" id="SpecificationContextBuilder-backto-FlowContextNode" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="387.39,926.63,383.1046,932.4296,386.8098,938.616,391.0952,932.8164,387.39,926.63" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[9d35bcb61cb6b86faf6a772872310cfc]
reverse link SecurityNode to Security--><path codeLine="148" d="M636.42,956.44 C634.61,975.31 632.62,996.11 630.98,1013.26 " fill="none" id="SecurityNode-backto-Security" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="629.48,955.51,638.36,936.27,643.42,956.84,629.48,955.51" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[69778c43ce2f8e406ddd63cbd988dc7e]
link SecurityNode to SecurityBuilder--><path codeLine="149" d="M669.88,936.44 C685.84,956.05 705.34,981.92 719.5,1007 C747.14,1055.94 769.62,1117.29 782.28,1155.32 " fill="none" id="SecurityNode-to-SecurityBuilder" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="786.34,1167.74,788.276,1160.7936,782.6086,1156.3349,780.6726,1163.2812,786.34,1167.74" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b91bf751f8d670e0faa736851f51cf9a]
reverse link FlowContext to ExecutionContext--><path codeLine="151" d="M236.5,1242.4 C236.5,1262.53 236.5,1285.76 236.5,1305.86 " fill="none" id="FlowContext-backto-ExecutionContext" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="236.5,1229.36,232.5,1235.36,236.5,1241.36,240.5,1235.36,236.5,1229.36" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="241.5" y="1272.5684">Global state</text><!--MD5=[48f43ff0cc8af21bea9328605622fc70]
link Leaf to Base--><path codeLine="152" d="M631.5,1380.17 C631.5,1398.46 631.5,1424.5 631.5,1446.63 " fill="none" id="Leaf-to-Base" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="638.5,1446.65,631.5,1466.65,624.5,1446.65,638.5,1446.65" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ba8e402fa16284b029c3f2ccb49be7ba]
link Identity to Leaf--><path codeLine="153" d="M522.89,1222.71 C544.46,1248.98 576.06,1287.47 599.62,1316.17 " fill="none" id="Identity-to-Leaf" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="605.15,1311.87,612.43,1331.77,594.33,1320.75,605.15,1311.87" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d8dd215e40927a43c6b49ba6a16cbd97]
link Security to Identity--><path codeLine="154" d="M593.94,1087.79 C575.81,1107.4 553.39,1131.64 534.84,1151.7 " fill="none" id="Security-to-Identity" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="525.81,1161.47,532.8208,1159.7821,533.9592,1152.6615,526.9484,1154.3493,525.81,1161.47" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[22531aa794ca254dc753200626431a3e]
link Identity to JwtIdentity--><path codeLine="155" d="M494.28,1222.71 C491.26,1244.01 487.09,1273.35 483.45,1298.99 " fill="none" id="Identity-to-JwtIdentity" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="490.36,1300.14,480.62,1318.96,476.5,1298.18,490.36,1300.14" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ca41f5e42d010edb91cd7e40aab9bb60]
reverse link Configuration to Security--><path codeLine="157" d="M190.27,1012.14 C205.52,998.09 224.58,983.85 245,976.5 C359.17,935.42 401.98,940.97 518,976.5 C542.35,983.96 566.17,998.86 585.34,1013.35 " fill="none" id="Configuration-backto-Security" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="195.01,1017.31,175.87,1026.41,185.15,1007.36,195.01,1017.31" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8235e1be7d697ea486c9fab48b96b484]
@startuml

class NodeBuilderDeserializer << StdDeserializer<AbstractBuilder> >> {
    -String nodePath(Deque<JsonNode> ancestors)
    -AbstractBuilder handleNodeBuilder(...)
    -AbstractBuilder buildNodeBuilder(...)
    - -
    +AbstractBuilder deserialize(JsonParser jsonParser, DeserializationContext context)
}

abstract class AbstractBuilder #DDD
abstract class LeafNodeBuilder #DDD {
    +<R extends Base> R build()
    #<R extends Base> R build(BuildContext buildContext)
    +String serialize()
}
class SpecificationBuilder <@JsonDeserialize(using = NodeBuilderDeserializer.class)> {
    +String specificationId
    +String name
    +String startFunctionId
    - -
    SpecificationBuilder configure(ConfigurationBuilder builder)
    SpecificationBuilder function(NodeWithIdBuilder builder)
    Specification end()
    - -
    NodeBuilder get(String nodeId)
    - -
    String serialize()
    String serializeAsYaml()
}

class ConfigurationBuilder {
}
class SecurityBuilder <@JsonDeserialize(using = NodeBuilderDeserializer.class)> {
}
class SpecificationContextBuilder {
}

NodeBuilderDeserializer -left-> SpecificationBuilder
<> diamond
diamond -up "from 0..*" NodeBuilderDeserializer
diamond -up "to 0..* " NodeBuilderDeserializer

Specification *- - NodeBuilderDeserializer : deserialize()
LeafNodeBuilder <|- - AbstractBuilder
ConfigurationBuilder <|- - LeafNodeBuilder
SecurityBuilder <|-up- - ConfigurationBuilder
SpecificationContextBuilder <|-r- ConfigurationBuilder

SpecificationBuilder <|- - ConfigurationBuilder
SpecificationBuilder -up-> Specification : end()


class BuildContext {
    +Map<String, NodeBuilder> nodeBuilderById
    +Map<String, Object> nodeInstanceById
    - -
    Map<String, NodeBuilder> nodeBuilderById()
    NodeBuilder getBuilder(String id)
    boolean containsBuilder(String id)
    <R> Map<String, R> nodeInstanceById()
    <R> R getInstance(String id)
    boolean containsInstance(String id)
    void cacheInstance(String id, Object instance)
    <V extends Base> V cacheInstanceIfAbsent(String key, Function<? super String, V> mappingFunction)
    - -
    BuildContext fromNodeBuilderById(Map<String, NodeBuilder> nodeBuilderById)
    static BuildContext empty()
    static BuildContext of(Map<String, NodeBuilder> nodeBuilderById, Map<String, Object> nodeInstanceById)
}

BuildContext "*"<.."1" BuildContext

class Specification {
    +String specificationId
    +String name
    +Configurations configurations
    +Node startFunction
    +Map<String, Node> nodeById
    - -
    id()
    name()
    startFunction()
    - -
    static Specification create(String specificationId, String name, Node startFunction, Map<String, Node> nodeById)
    static Specification create(String specificationId, String name, Configurations configurations, Node startFunction, Map<String, Node> nodeById)
    - -
    static SpecificationBuilder start(String specificationId, String name, String startFunction)
    static SpecificationBuilder deserialize(String source)
    static <R extends AbstractBuilder> R deserialize(String source, Class<R> builderClass)
}


class FlowContextNode <<FlowContext>> {
    +FlowContext build(BuildContext buildContext)
}

class SecurityNode <<Security>> {
    +Security build(BuildContext buildContext)
}


interface Configuration
interface Configurations {
    +Map<Class<? extends Configuration>, Configuration> configurationMap
    - -
    FlowContext flowContext()
    Security security()
    - -
}
interface Configurations.Builder {
    +Builder add(Configuration configuration)
    ~void createDefaultConfigurationIfAbsent()
    +Configurations build()
}
interface FlowContext extends Configuration {
    String topic()
    ExecutionContext globalContext()
}
interface Security {
    String sslBundleName()
    List<Identity> identities()
}
interface Base #DDD
interface Leaf #DDD
interface Identity {
    String id()
}
interface JwtIdentity {
    JwtHeaderClaims headerClaims()
    JwtClaims claims()
}
class ExecutionContext #DDD {
    ~Services services
    ~Map<Object, Object> globalState
    ~Map<String, Object> variables
    ~Map<Object, Object> state
}

Specification *.up.> BuildContext : create()

SpecificationBuilder *.left.> Configurations : create()
Configurations.Builder *-up- Configurations
Configurations.Builder *- - Configuration

FlowContextNode <|-down- FlowContext
SpecificationContextBuilder *.down. FlowContextNode

SecurityNode <|- - Security
SecurityBuilder *.up. SecurityNode

ExecutionContext -up-* FlowContext : " Global state"
Base <|-up- Leaf
Leaf <|-up- Identity
Identity *-up- Security
JwtIdentity <|-up- Identity

Configuration <|-right- Security

@enduml

PlantUML version 1.2020.26(Mon Dec 21 18:45:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NO
--></g></svg>